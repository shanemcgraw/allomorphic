<!DOCTYPE html>
<html>
<head>
	<title>Launchsite</title>
	<style type="text/css">
	body{
	background-color: 406891

	}
	h1{
		margin: 100 10 10 200
	}
	table{
		border: solid 1px black;
	}

	</style>

	<script type="text/javascript" src="warp.js"></script>

</head>
<body>

		<h1>Allomorphic</h1>
		<h5>
			 <a href="https://en.wikipedia.org/wiki/Allomorph" target="blank">Allomorph<a/>: a unit of meaning that varies in sound without changing meaning
		</h5>


		<!--<script src="../getMovieData.js"></script>-->
		<div class="requestData">
			<h2>
				Enter three of your favorite films
			</h2>

			<h5>
				in any order
			</h5>

			<div id="feedback">
			</div>

			<form id="getMovieData">

				<input type="text" id="movie" value="Movie #1">
				<input type="text" id="year" value="Year">
				<input type="button" id="adder" value="Add">
					
			</form>

		</div>

		<h2 id = "submission">
			Plot twist!
		</h2>

		<p>
			<ul id="movieData">
			</ul>
		</p>

		<table>
			<tr>
				<th>Title</th>
				<th>Year</th>
				<th>Poster</th>
			</tr>
			<tr>
				<td id="film1"></td>
				<td id="year1"></td>
				<td id="poster1"></td>
			</tr>
			<tr>
				<td id="film2"></td>
				<td id="year2"></td>
				<td id="poster2"></td>
			</tr>
			<tr>
				<td id="film3"></td>
				<td id="year3"></td>
				<td id="poster3"></td>
			</tr>

		</table>


		<script type="text/javascript">

			//Helper functions

			function get(x){
				return document.getElementById(x);
			}

			function tagger(tag) {
				return document.getElementsByTagName(tag);
			}

			function classer(classy) {
				return document.getElementsByClassName(classy);
			}

			function create(el) {
				return document.createElement(el);
			}

			function tNode(text) {
				return document.createTextNode(text);
			}

			var elButton = get("adder");
			var elForm = get("getMovieData");
			var elMovie = get("movie");
			var elYear = get("year");
			var mData = get("movieData");
			var movieCounter = 0;

			var film1, film2, film3;



			// New function "postMovie" will listen for a click on the "Add" button
			// and take both the film title & year released to search the oMDB api -
			// making a call to "oMDB". After receiving the data, it posts the content 
			// and will also update the "movieCounter" to check
			// that the user entered 3 movies

			function postMovie(e){

				//Get the 'target'; the element that the user clicks on
				var target = e.target;
				

				if(elButton.id === "generator"){
					//Call getStory
				}
				
				else if(target.type === "button"){

					//Update counter so the user sees error after 3 movie inputs

					movieCounter++;
					
					var movieTitle = elMovie.value;
					var year = elYear.value;
					
					var urlToCall = urlBuild(titleSmoother(movieTitle), year);

					//mrSulu on the bridge
					mrSulu(urlToCall);
					
					if(movieCounter < 3){
						movie.value = "Movie #" + (movieCounter + 1).toString();
						year.value = "Year";

					}
					else if(movieCounter >= 3){
						elMovie.value = '';
						elYear.value = '';
						elButton.type;
						elButton.value = "Generate";
						elButton.id = "generator";
					}


				}
			};

			elForm.addEventListener('click', function(e){
				postMovie(e);
			});

			function updateFilmTable(filmResponse){
				var newEl = create("tr");
				var text = tNode(filmResponse.Title);

				newEl.appendChild(text);

				var position = tagger('tr')[tagger('tr').length -1];
				console.log(tagger('tr'));

				position.appendChild(newEl);

			}




		</script>


</body>
</html>